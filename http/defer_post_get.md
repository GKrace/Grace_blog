---
layout: http
title: get 和 post 的区别
date: 2020-1-6 16:39:02
tags: http
---

以下是 W3C 的标准答案，简单参考：

<!-- <img src='/images/defer_w3c_getpost.png' width="90%" height="90%"> -->

|                  | GET                                                                                                          | POST                                                                                 |
| ---------------- | ------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------ |
| 后退按钮/刷新    | 无害                                                                                                         | 数据会被重新提交（浏览器应该告知用户数据会被重新提交）。                             |
| 书签             | 可收藏为书签                                                                                                 | 不可收藏为书签                                                                       |
| 缓存             | 能被缓存                                                                                                     | 不能缓存                                                                             |
| 编码类型         | application/x-www-form-urlencoded                                                                            | application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码。 |
| 历史             | 参数保留在浏览器历史中。                                                                                     | 参数不会保存在浏览器历史中。                                                         |
| 对数据长度的限制 | 是的。当发送数据时，GET 方法向 URL 添加数据；URL 的长度是受限制的（URL 的最大长度是 2048 个字符）。          | 无限制。                                                                             |
| 对数据类型的限制 | 只允许 ASCII 字符。                                                                                          | 没有限制。也允许二进制数据。                                                         |
| 安全性           | 与 POST 相比，GET 的安全性较差，因为所发送的数据是 URL 的一部分。在发送密码或其他敏感信息时绝不要使用 GET ！ | POST 比 GET 更安全，因为参数不会被保存在浏览器历史或 web 服务器日志中。              |
| 可见性           | 数据在 URL 中对所有人都是可见的。                                                                            | 数据不会显示在 URL 中。                                                              |

总结一下主要就是 语义化、安全、幂等、可缓存（semantics、safe、idempotent、cacheable） 上的区别。

- GET 用于获取信息，是无副作用的，是幂等的，且可缓存
- POST 用于修改服务器上的数据，有副作用，非幂等，不可缓存

### 幂等性

幂等性是数学中的一个概念，表达的是 N 次变换与 1 次变换的结果相同。
幂等请求的意思是：HTTP 方法的幂等性是指一次和多次请求某一个资源应该具有同样的副作用，这里强调的是一次和 N 次具有相同的副作用，而不是每次 GET 的结果相同。

- HTTP DELETE 方法用于删除资源，有副作用，但它应该满足幂等性。比如：`DELETE http://www.forum.com/article/4231`，调用一次和 N 次对系统产生的副作用是相同的，即删掉 id 为 4231 的帖子；因此，调用者可以多次调用或刷新页面而不必担心引起错误。
- POST 和 PUT 的区别容易被简单地误认为“POST 表示创建资源，PUT 表示更新资源”；而实际上，二者均可用于创建资源，更为本质的差别是在幂等性方面。POST 所对应的 URI 并非创建的资源本身，而是资源的接收者。比如：`POST http://www.forum.com/articles` 的语义是在`http://www.forum.com/articles`下创建一篇帖子，HTTP 响应中应包含帖子的创建状态以及帖子的 URI。两次相同的 POST 请求会在服务器端创建两份资源，它们具有不同的 URI；所以，POST 方法不具备幂等性。
- PUT 所对应的 URI 是要创建或更新的资源本身。比如：`PUT http://www.forum/articles/4231的语义是创建或更新ID为4231`的帖子。对同一 URI 进行多次 PUT 的副作用和一次 PUT 是相同的；因此，PUT 方法具有幂等性。

### GET 和 POST 从报文上的区别

GET 请求参数是在 URL 后面的，数据在地址栏上可见；POST 请求参数放在请求体重，数据在地址栏上不可见。  
GET 和 POST 方法没有实质区别，只是报文格式不同。  
GET 和 POST 只是 HTTP 协议中两种请求方式，而 HTTP 协议是基于 TCP/IP 的应用层协议，无论 GET 还是 POST，用的都是同一个传输层协议，所以在传输上，没有区别。  
HTTP 请求，最初设定了八种方法。这八种方法本质上没有任何区别，之所以有这么多分工是为了更好体现语义化。

带参数时，我们约定 GET 方法的参数应放在 url 中，POST 方法参数应该放在 body 中，但是如果你要给 GET 加上 request body，给 POST 带上 url 参数，技术上也是完全行的通的。只要和服务器做好约定。

### GET 安全性？

POST 要比 GET 安全一点点：两者都是明文传输，这里又一个细节，GET 的 URL 会被放在浏览器历史和 WEB 服务器日志里面。POST 发完基本就木有了。。所以如果你把关键数据放在 GET 里面，被人偷窥了浏览器，或者 WEB 服务器被入侵日志被人倒去了，基本泄露可能性 100%。而 POST 来说，日志没有记录，只要数据库服务器不被入侵，基本还是安全的。[参考链接](https://www.zhihu.com/question/31640769/answer/52824098)

从传输的角度来说，他们都是不安全的，因为 HTTP 在网络上是明文传输的，只要在网络节点上捉包，就能完整地获取数据报文。
要想安全传输，就只有加密，也就是 HTTPS。

### GET 相对 POST 的优势

本质上， GET 的所有信息都在 URL， 所以很方便的记录下来重复使用。

所以如果你希望：

- 请求中的 URL 可以被手动输入
- 请求中的 URL 可以被存在书签里，或者历史里，或者快速拨号里面，或者分享给别人。
- 请求中的 URL 是可以被搜索引擎收录的。
- 带云压缩的浏览器，比如 Opera mini/Turbo 2, 只有 GET 才能在服务器端被预取的。
- 请求中的 URL 可以被缓存。请使用 GET.

另外一个准则是，可以重复的交互，比如取个数据，跳个页面， 用 GET.  
不可以重复的操作， 比如创建一个条目/修改一条记录， 用 POST, 因为 POST 不能被缓存，所以浏览器不会多次提交。

### GET 传参的限制

HTTP 协议并未规定 GET 和 POST 的请求长度限制，所谓的请求长度限制是由浏览器和 web 服务器决定和设置的。**服务器是因为处理长 URL 要消耗比较多的资源，为了性能和安全（防止恶意构造长 URL 来攻击）考虑，会给 URL 长度加限制。** 各种浏览器和 web 服务器的设定均不一样，这依赖于各个浏览器厂家的规定或者可以根据 web 服务器的处理能力来设定。IE 和 Safari 浏览器 限制 2k，Opera 限制 4k，Firefox 限制 8k（非常老的版本 256byte），如果超出了最大长度，大部分的服务器直接截断，也有一些服务器会报 414 错误。

各个浏览器和 web 服务器的最大长度总结：

- 浏览器

  - IE：IE 浏览器（Microsoft Internet Explorer） 对 url 长度限制是 2083（2K+53），超过这个限制，则自动截断（若是 form 提交则提交按钮不起作用）。
  - Firefox：火狐浏览器的 url 长度限制为 65536 字符，但实际上有效的 URL 最大长度不少于 100,000 个字符。
  - Chrome：谷歌浏览的 url 长度限制超过 8182 个字符返回本文开头时列出的错误。
  - Safari：Safari 的 url 长度限制至少为 80 000 字符。
  - Opera：Opera 浏览器的 url 长度限制为 190 000 字符。Opera9 地址栏中输入 190000 字符时依然能正常编辑。

- 服务器:
  - Apache：Apache 能接受 url 长度限制为 8 192 字符
  - IIS：Microsoft Internet Information Server(IIS)能接受 url 长度限制为 16384 个字符。这个是可以通过修改的（IIS7）
    configuration/system.webServer/security/requestFiltering/requestLimits@maxQueryStringsetting.
